<!DOCTYPE html>
<html>
  <head>

    <link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
     </script>
    <script>
      function blocklyLoaded(blockly) {
        // Called once Blockly is fully loaded.
        window.Blockly = blockly;
      }
    </script>
  </head>

  <body>

    <div class="modal hide fade" id="addBlocksDialog">
      <div class="modal-header">
        <h3>Add new blocks to your project!</h3>
        
      </div>
      Enter a block-set URL below, or click <a href="./blocks">here</a> to find blocks.<br>
      <input type="text" placeholder="Block Address" id="blojuleAddressField" style="width:70%">
      <div class="modal-footer">
        <button class="btn btn-primary" id="addBlojule">Add</button><button class="btn" data-dismiss="modal"  id="cancel">Cancel</button>
      </div>
    </div>

    <h1 id="logo">
      <img src="./img/logo-small.png">
      Bloccoli
    </h1>

    <menu>


    <a href="#" id="addBlocksButton">
     <li>
        Add Blocks 
        <img src="./img/add-icon.png">
     </li>
     </a>

     <a href="#" id="runButton">
     <li>
      Run 
      <img src="./img/run-icon.png">
    </li>
    </a>

    <a href="#" id="shareButton">
     <li>
      Share
      <img src="./img/share-icon.png">
    </li> 
    </a>
    </menu>
    <script>

    //JSON representation:
    var blocklyToolbox = [];
    //XML Prepared for Blockly:
    var blocklyXMLToolbox = '';

      function getUrlVars()
      {
          var vars = [], hash;
          var source = window.location.href;
          var hashes = source.slice(source.indexOf('?') + 1).split('&');
          for(var i = 0; i < hashes.length; i++)
          {
              hash = hashes[i].split('=');
              vars.push(hash[0]);
              vars[hash[0]] = hash[1];
          }
          return vars;
      }

      var urlVars = getUrlVars();
      var frameUrl = './frame.html';
      if(urlVars.bloccoliExtensions){
        frameUrl+='?bloccoliExtensions='+urlVars.bloccoliExtensions
      }

      console.log("Iframe requesting with: "+frameUrl);
      var iframe = document.createElement('IFRAME');
      iframe.setAttribute('src', frameUrl);
      iframe.setAttribute('id', 'blocklyFrame');
      document.body.appendChild(iframe);
      // $('body').append('<iframe id="blocklyFrame" src="'+frameUrl+'"></iframe>')
    </script>
  </body>

</html>