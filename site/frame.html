<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <script type="text/javascript" src="./js/jquery.js"></script>
    
    <link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.min.css">

    <script type="text/javascript" src="./bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="./blockly/javascript_compressed.js"></script>
    <script type="text/javascript" src="./blockly/en_compressed.js"></script>
    <script type="text/javascript" src="./blockly/appengine/storage.js"></script>
     <script type="text/javascript" src="./js/bundle.js"></script>

    <script type="text/javascript" src="./js/colour.js"></script>
    <script type="text/javascript" src="./js/lists.js"></script>
    <script type="text/javascript" src="./js/logic.js"></script>
    <script type="text/javascript" src="./js/loops.js"></script>
    <script type="text/javascript" src="./js/math.js"></script>
    <script type="text/javascript" src="./js/procedures.js"></script>
    <script type="text/javascript" src="./js/text.js"></script>
    <script type="text/javascript" src="./js/variables.js"></script>

    <style>
      html, body {
        background-color: #fff;
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
      }
      .blocklySvg {
      }
    </style>
    
  </head>
  <body>
    
  </body>

  <script src="./js/defaultBlocks.js"></script>
  <script id = "defaultInitBlocks">
  window.parent.blocklyToolbox = [
    {
      name:"Logic",
      blocks:[
        "controls_if",
        "logic_compare",
        "logic_operation",
        "logic_negate",
        "logic_boolean",
        "logic_null",
        "logic_ternary"
      ]
    },
    {
      name:"Loops",
      blocks:[
        "controls_repeat",
        "controls_repeat_ext",
        "controls_whileUntil",
        "controls_for",
        "controls_forEach",
        "controls_flow_statements"
      ]
    },
    {
      name:"Math",
      blocks:[
        "math_number",
        "math_arithmetic",
        "math_single",
        "math_constant",
        "math_number_property",
        "math_change",
        "math_on_list",
        "math_modulo",
        "math_constrain",
        "math_random_int",
        "math_random_float"
      ]
    },
    {
      name:"Text",
      blocks:[
        "text_join",
        "text_append",
        "text_length",
        "text_isEmpty",
        "text_indexOf",
        "text_charAt",
        "text_getSubstring",
        "text_changeCase",
        "text_trim",
        "text_print",
        "text_prompt"
      ]
    },
    {
      name:"Lists",
      blocks:[
        "lists_create_empty",
        "lists_create_with",
        "lists_repeat",
        "lists_length",
        "lists_isEmpty",
        "lists_indexOf",
        "lists_getIndex",
        "lists_setIndex",
        "lists_getSublist"
      ]
    },
    {
      name:"Color",
      blocks:[
        "colour_picker",
        "colour_random",
        "colour_rgb",
        "colour_blend"
      ]
    },
    {
      name:"Variables",
      blocks:[
        "variables_get",
        "variables_set",
        "lists_create_empty",
        "lists_create_with",
        "lists_repeat",
        "lists_length",
        "lists_isEmpty",
        "lists_indexOf",
        "lists_getIndex",
        "lists_setIndex",
        "lists_getSublist"
      ]
    },
    {
      name:"Functions",
      blocks:[
        "procedures_defreturn",
        "procedures_ifreturn"
      ]
    }
  ];
  </script>
  <script id="frameInitScript">

  </script>
  <script>


      function generateToolbox(){
        var newXml = '<xml id="toolbox">';
        for(var i = 0, iLen = window.parent.blocklyToolbox.length; i < iLen; i++){
          newXml += '<category name="'+window.parent.blocklyToolbox[i].name+'">';
          for(var b = 0, bLen = window.parent.blocklyToolbox[i].blocks.length; b < bLen; b++){
            newXml += '<block type="'+window.parent.blocklyToolbox[i].blocks[b]+'"></block>';
          }
          newXml += '</category>';
        }
        newXml += '</xml>';
        window.parent.blocklyXMLToolbox = newXml;
        return newXml;
      }


      function init() {



        Blockly.inject(document.body,
          {
            path: './blockly/',
            readOnly: false,
            trashcan: true,
            toolbox: generateToolbox()
          });
        // Let the top-level application know that Blockly is ready.
        window.parent.blocklyLoaded(Blockly);

      }
      init();
    </script>
</html>